## 一、TimeFire使用的mysql库

TimeFire使用了：
  - database/sql
  - github.com/go-sql-driver/mysql

来完成对mysql数据库的操作。

##### database/sql包

    database/sql包是GO提供的数据库的抽象接口。

    它可以根据具体的driver打开关闭数据库连接，管理连接池。

    正在使用的连接被标记为繁忙，用完后回到连接池等待下次使用。

    **如果你没有把连接释放回连接池，会导致过多连接使系统资源耗尽。**

##### github.com/go-sql-driver/mysql

    一个MySQL drivers

    如何导入driver，按如下代码：

    import (
        "database/sql"
        _ "github.com/go-sql-driver/mysql"
    )

## 二、代码分析

通常有2种使用方式：
  - 不带连接池类型
  - 带连接池类型

##### 不带连接池类型

    可以阅读TimeFire/server/src/Lobby/online/online.go代码

    模仿这个类用法就行


##### 带连接池类型

    可以阅读TimeFire/server/src/DataCenter/data/init.go代码

    主要代码：

    // NewMysqlService 新建一个sql连接服务
    func NewCareerService(user, pwd, addr, db string, maxConns, maxIdleConns int, maxLifetime time.Duration) *CareerService {
    	log.Info("user:", user, " addr:", addr, " db:", db)
    	s := &CareerService{}
    	var err error
    	s.mysqlDB, err = sql.Open("mysql", fmt.Sprintf("%s:%s@tcp(%s)/%s", user, pwd, addr, db))

    	s.mysqlDB.SetMaxOpenConns(maxConns)
    	s.mysqlDB.SetMaxIdleConns(maxIdleConns)
    	s.mysqlDB.SetConnMaxLifetime(maxLifetime)

    	if err != nil {
    		log.Error(err)
    		return nil
    	}

    	return s
    }

    模仿这个类用法就行
