## 一、Zeus层

```tree
├─dbservice
│      accountutil.go
│      cache.go
│      dbservice.go
│      dbservice_test.go
│      dbtest.json
│      entitysrvutil.go
│      entitytypeutil.go
│      entityutil.go
│      serveridutil.go
│      serverutil.go
│      serverutil_test.go
│      sessionutil.go
│      spaceutil.go
│      uidgenerator.go
```

  - 编码方式

    **Zeus层对Redis操作，都放在 zeus/dbservice目录下。**

    **一个go文件包含对一种数据的所有redis操作。** 如：

    > 帐号相关redis操作，都在accountutil.go中。<br>
    > 需要存储帐号相关字段，只需要访问accountutil.go中的接口即可。


  - dbservice.go

    上述文件列表中，dbservice.go是redigo开源库的封装，提供了对redis的简易访问接口


## 二、Server层
```tree

├─db
│      AnnuonceUtil.go
│      BanAccount.go
│      CdkeyRelation.go
│      dataCenterAddr.go
│      friendUtil.go
│      idipmail.go
│      mailutil.go
│      playerCareerData.go
│      playerDayData.go
│      playerGoodsUtil.go
│      playerInfoUtil.go
│      playerRank.go
│      playerRatingUtil.go
│      playertempUtil.go
│      teamUtil.go
│      util.go
```

  - 各文件功能介绍

    暂略


  - 编码方式

    **Server层对Redis操作，都放在 server/src/db 目录下。**

    **一个go文件包含对一种数据的所有redis操作。**


  - util.go

    进一步封装了对 string、set、zset、hash的操作接口。


## 三、代码分析

游戏中要保存的数据通常有以下几类：

  - 1key-1value型：一个key，对应一个value
  - 1key-Nvalue型：一个key，对应多个value
  - 1id-1data(fields)型：一个ID，一条数据，数据有很多字段
  - 1id-Ndata(fields)型：一个ID，有多条数据，每条数据有很多字段

##### 1key-1value型

    可以阅读spaceutil.go代码

    新作这类数据，模仿它就行

##### 1key-Nvalue型：

    可以阅读entitytypeutil.go代码

    新作这类数据，模仿它就行


##### 1id-1data(fields)型

    可以阅读accountutil.go代码

    新作这类数据，模仿它就行

##### 1id-Ndata(fields)型

    可以阅读entitysrvutil.go、mailutil.go代码

    新作这类数据，模仿它就行
