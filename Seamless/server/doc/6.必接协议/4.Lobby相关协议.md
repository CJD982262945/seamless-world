## RPCMsg协议

```go
type RPCMsg struct {
	ServerType  uint8
	SrcEntityID uint64
	MethodName  string
	Data        []byte //proto消息参数
}
```

  - RPC协议都是通过 `RPCMsg` 这个Struct协议发送
  - 序列化、反序列化，分为2部分：

    - 对RPCMsg协议做为struct协议来解析
    - RPCMsg.Data部分通过 server/src/zeus/serializer/serializer.go 来解析


  - 细节请参考server/src/zeus/serializer/serializer.go


## PlayerLogin

  - rpc协议
  - client -> gateway -> lobby
  - 参数 protoMsg.PlayerLogin，一个protobuf协议。在game.proto中定义
  - 登录lobby第一条消息必须是它
  - 参数打包过程大致如下，有个印象：

    ```js
    var pm = new proto.PlayerLogin();
    var pmdata = pm.serializeBinary();
    var data = Buffer.concat([unpacker.uint8.packerl(14), unpacker.uint16.packerl(440), unpacker.uint16.packerl(pmdata.length), Buffer.from(pmdata)]);
    this.user.RPC(def.ServerTypeLobby, "PlayerLogin", data);
    ```

    - 14 表示这个参数是 proto类型
    - 440 表示这个proto消息对应的消息号


## EnterRoomReq

  - rpc协议
  - client -> gateway -> lobby
  - 请求开始匹配游戏


## ExpectTime

  - rpc协议
  - lobby -> gateway -> client
  - 大致匹配时间
  - 参数:

    - uint32
    - 秒数


## NotifyWaitingNums


  - rpc协议
  - lobby -> gateway -> client
  - 匹配中的人数
  - 参数:

    - uint32
    - 人数


## MatchSuccess

  - rpc协议
  - lobby -> gateway -> client
  - 通知匹配成功
  - 参数：

    - uint32
    - 地图ID


  - 客户端可以开始加载地图，切Loading界面
