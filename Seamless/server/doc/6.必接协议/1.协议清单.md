## 协议清单

先列举下清单，后面章节依次详细介绍每个协议。

以下是客户端从连接Login开始，到进入Room场景中，所有必接协议清单。

依照流程序，在清单中依次填写的：

| 协议名                        | 协议投递路径                                     | 协议     | 说明                                                           |
| -------------------------- | ------------------------------------------ | ------ | ------------------------------------------------------------ |
| <http://%s:%s/login>       | client -> login                            | http   | 账号验证，返回gateway addr。（客户端点击登录游戏触发）                            |
| ClientVertifyReq           | client -> gateway                          | struct | 登录Gateway验证                                                  |
| ClientVertifySucceedRet    | gateway -> client                          | struct | 登录Gateway验证成功。主要信息UID                                                |
| ClientVertifyFailedRet     | gateway -> client                          | struct | 登录Gateway验证失败                                                |
| ProtoSync                  | gateway -> client                          | struct | Server层 `协议号 - 协议` 对应信息                                      |
| MRolePropsSyncClient       | gateway -> client                          | struct | 账号角色基本信息。重要信息：EntityID。收到后就可以登录lobby了。                       |
| RPCMsg                     | S->C ; C->S                                | struct | 基础功能性协议。本质上，不再这张表中                                           |
| PlayerLogin                | client -> gateway -> lobby                 | rpc    | 登录lobby                                                      |
| EnterRoomReq               | client -> gateway -> lobby                 | rpc    | 客户端点击 开始游戏（或称为开始匹配）                                          |
| ExpectTime                 | client -> gateway -> lobby                 | rpc    | 大致匹配时间。（非必须，不接体验不好）                                          |
| NotifyWaitingNums          | client -> gateway -> lobby                 | rpc    | 匹配中的人数。（非必须，不接体验不好）                                          |
| MatchSuccess               | lobby -> gateway -> client                 | rpc    | 服务器端匹配成功，通知客户端。主要信息mapID（客户端要开始加载地图了）                                 |
| EnterSpace                 | room -> gateway -> client                  | struct | 客户收到就可以连接Room了。重要信息：SpaceID、Addr                             |
| ClientVertifyReq           | client -> room                             | struct | 略                                                            |
| ClientVertifySucceedRet    | room -> client                             | struct | 略                                                            |
| ClientVertifyFailedRet     | room -> client                             | struct | 略                                                            |
| SpaceUserConnect           | client-> room                              | struct | 通过这个消息，Entity消息以及RPC消息不再 room-> gateway-> client。而是直接room->client了。 |
| SpaceUserConnectSucceedRet | room->client                               | struct | 非必须处理。                                                       |
| EntityAOIS                 | room -> gateway -> client ; room -> client | struct | 进入AOI；离开AOI                                                  |
| AOISyncUserState           | room -> gateway -> client ; room -> client | struct | AOI内Entity状态信息更新                                             |
| AdjustUserState            | room -> gateway -> client ; room -> client | struct | 自身状态信息更新                                                     |
