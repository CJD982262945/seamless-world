<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="1009" height="483" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[Title:服务器到客户端的实体消息传递过程
Note left of other server.Server: 1. 调用entity.Post\n或者entity.RPC
Note right of other server.Server: 2. 通过EntityMsgTransport包裹实体消息
other server.Server->Gateway: 3. 发送EntityMsgTransport消息
Note right of Gateway: 4. 触发Entities.MsgProc_EntityMsgTransport函数
Note right of Gateway: 5. 判断包目的类型为iserver.ServerTypeClient\n解包获取实体消息；获取client sess对象
Gateway->Client: 6. 发送实体消息]]></source><desc>服务器到客户端的实体消息传递过程</desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"></path></marker></defs><g class="title"><rect x="10" y="10" width="262.21875" height="30" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="17.21875" y="30.546875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="15">服务器到客户端的实体消息传递过程</tspan></text></g><g class="actor"><rect x="108.328125" y="50" width="170" height="37.765625" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="119.4375" y="74.4375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="118.328125">other server.Server</tspan></text></g><g class="actor"><rect x="108.328125" y="426.140625" width="170" height="37.765625" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="119.4375" y="450.578125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="118.328125">other server.Server</tspan></text></g><line x1="193.328125" x2="193.328125" y1="87.765625" y2="426.140625" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="493.890625" y="50" width="78.875" height="37.765625" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="506.109375" y="73.328125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="503.890625">Gateway</tspan></text></g><g class="actor"><rect x="493.890625" y="426.140625" width="78.875" height="37.765625" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="506.109375" y="449.46875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="503.890625">Gateway</tspan></text></g><line x1="533.328125" x2="533.328125" y1="87.765625" y2="426.140625" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="909.4375" y="50" width="70" height="37.765625" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="921.65625" y="74.4375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="919.4375">Client</tspan></text></g><g class="actor"><rect x="909.4375" y="426.140625" width="70" height="37.765625" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="921.65625" y="450.578125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="919.4375">Client</tspan></text></g><line x1="944.4375" x2="944.4375" y1="87.765625" y2="426.140625" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="note"><rect x="20" y="107.765625" width="153.328125" height="49.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="27.21875" y="128.3125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="25">1. 调用entity.Post</tspan><tspan dy="1.2em" x="25">或者entity.RPC</tspan></text></g><g class="note"><rect x="213.328125" y="176.953125" width="300" height="30" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="219.4375" y="197.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="218.328125">2. 通过EntityMsgTransport包裹实体消息</tspan></text></g><g class="signal"><text x="250.5546875" y="237.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="249.4453125">3. 发送EntityMsgTransport消息</tspan></text><line x1="193.328125" x2="533.328125" y1="246.953125" y2="246.953125" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="553.328125" y="266.953125" width="371.109375" height="30" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="560.546875" y="287.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="558.328125">4. 触发Entities.MsgProc_EntityMsgTransport函数</tspan></text></g><g class="note"><rect x="553.328125" y="316.953125" width="347.765625" height="49.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="560.546875" y="337.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="558.328125">5. 判断包目的类型为iserver.ServerTypeClient</tspan><tspan dy="1.2em" x="558.328125">解包获取实体消息；获取client sess对象</tspan></text></g><g class="signal"><text x="681.1015625" y="396.6875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="678.8828125">6. 发送实体消息</tspan></text><line x1="533.328125" x2="944.4375" y1="406.140625" y2="406.140625" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g></svg>